function initMap(){var e={lat:40.7831,lng:-73.9712},n=new google.maps.Map(document.getElementById("map"),{zoom:14,center:e}),t=new XMLHttpRequest;t.open("GET","https://nextbike.net/maps/nextbike-official.json",!1),t.send();var o,a=JSON.parse(t.responseText),c=a.countries;$(c).each(function(e,n){$(n.cities).each(function(e,n){$(city_select).append("<option>"+n.name+"</option>")})}),$(function(){$(city_select).on("change",function(){var t=this.value;$(c).each(function(n,i){$(i.cities).each(function(n,i){i.name===t&&(e={lat:i.lat,lng:i.lng},o=i.places)})}),n=new google.maps.Map(document.getElementById("map"),{zoom:14,center:e}),infowindow=new google.maps.InfoWindow;var a;for(i in o)a=new google.maps.Marker({position:new google.maps.LatLng(o[i].lat,o[i].lng),map:n}),content=o[i].name+" - Bikes available: "+o[i].bikes,google.maps.event.addListener(a,"click",function(e,t,o){return function(){o.close(),o.setContent(t),o.open(n,e)}}(a,content,infowindow))})})}